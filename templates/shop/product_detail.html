{% extends 'base.html' %}
{% load static %}

{% block title %}Product Details - Women's Wear Store{% endblock %}

{% block extra_css %}
<style>
.product-detail-container {
    padding: 3rem 0;
}

.product-images {
    position: sticky;
    top: 2rem;
}

.main-image {
    position: relative;
    overflow: hidden;
    border-radius: var(--radius-lg);
    margin-bottom: 1rem;
    background: var(--white);
}

.main-image img {
    width: 100%;
    height: 500px;
    object-fit: cover;
    transition: var(--transition-slow);
}

.zoom-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    cursor: zoom-in;
}

.image-thumbnails {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 0.5rem;
}

.thumbnail {
    border-radius: var(--radius-md);
    overflow: hidden;
    cursor: pointer;
    transition: var(--transition-normal);
    border: 2px solid transparent;
}

.thumbnail:hover,
.thumbnail.active {
    border-color: var(--primary-color);
    transform: translateY(-2px);
}

.thumbnail img {
    width: 100%;
    height: 80px;
    object-fit: cover;
}

.product-info {
    padding-left: 2rem;
}

.product-title {
    font-size: 2rem;
    font-weight: 600;
    color: var(--dark);
    margin-bottom: 1rem;
}

.product-rating {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.rating-stars {
    color: var(--accent-gold);
    font-size: 1.1rem;
}

.rating-text {
    color: var(--grey-600);
    font-size: 0.95rem;
}

.product-price {
    margin-bottom: 2rem;
}

.current-price {
    font-size: 2.5rem;
    font-weight: 700;
    color: var(--primary-color);
}

.original-price {
    font-size: 1.5rem;
    color: var(--grey-500);
    text-decoration: line-through;
    margin-left: 1rem;
}

.discount-badge {
    background: var(--gradient-gold);
    color: var(--dark);
    padding: 0.5rem 1rem;
    border-radius: var(--radius-md);
    font-weight: 600;
    margin-left: 1rem;
}

.product-description {
    color: var(--grey-700);
    font-size: 1.1rem;
    line-height: 1.6;
    margin-bottom: 2rem;
}

.product-options {
    margin-bottom: 2rem;
}

.option-group {
    margin-bottom: 1.5rem;
}

.option-label {
    font-weight: 600;
    color: var(--dark);
    margin-bottom: 0.75rem;
    display: block;
}

.size-options {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
}

.size-option {
    width: 50px;
    height: 50px;
    border: 2px solid var(--grey-300);
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: var(--transition-normal);
    font-weight: 600;
    background: var(--white);
}

.size-option:hover,
.size-option.selected {
    border-color: var(--primary-color);
    background: var(--primary-color);
    color: var(--white);
}

.size-option.unavailable {
    opacity: 0.3;
    cursor: not-allowed;
    position: relative;
}

.size-option.unavailable::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 0;
    width: 100%;
    height: 2px;
    background: var(--danger);
    transform: translateY(-50%) rotate(45deg);
}

.color-options {
    display: flex;
    gap: 0.75rem;
    flex-wrap: wrap;
}

.color-option {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    border: 3px solid var(--white);
    box-shadow: 0 0 0 2px var(--grey-300);
    cursor: pointer;
    transition: var(--transition-normal);
    position: relative;
}

.color-option:hover,
.color-option.selected {
    box-shadow: 0 0 0 2px var(--primary-color);
    transform: scale(1.1);
}

.quantity-selector {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 2rem;
}

.quantity-control {
    display: flex;
    border: 2px solid var(--grey-300);
    border-radius: var(--radius-md);
    overflow: hidden;
}

.quantity-btn {
    background: var(--grey-100);
    border: none;
    padding: 0.75rem;
    cursor: pointer;
    transition: var(--transition-normal);
    font-weight: 600;
}

.quantity-btn:hover {
    background: var(--primary-light);
}

.quantity-input {
    border: none;
    text-align: center;
    width: 60px;
    padding: 0.75rem 0.5rem;
    font-weight: 600;
}

.product-actions {
    display: grid;
    grid-template-columns: 2fr 1fr;
    gap: 1rem;
    margin-bottom: 2rem;
}

.btn-add-cart {
    font-size: 1.1rem;
    padding: 1rem 2rem;
    font-weight: 600;
}

.btn-wishlist {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
}

.product-features {
    background: var(--grey-100);
    border-radius: var(--radius-lg);
    padding: 1.5rem;
    margin-bottom: 2rem;
}

.feature-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.feature-list li {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
    color: var(--grey-700);
}

.feature-list li:last-child {
    margin-bottom: 0;
}

.feature-list i {
    color: var(--success);
    font-size: 1.1rem;
}

.product-tabs {
    margin-top: 3rem;
}

.nav-tabs {
    border-bottom: 2px solid var(--grey-200);
}

.nav-tabs .nav-link {
    border: none;
    border-bottom: 3px solid transparent;
    color: var(--grey-600);
    font-weight: 600;
    padding: 1rem 2rem;
    transition: var(--transition-normal);
}

.nav-tabs .nav-link:hover,
.nav-tabs .nav-link.active {
    border-bottom-color: var(--primary-color);
    color: var(--primary-color);
    background: none;
}

.tab-content {
    padding: 2rem 0;
}

.reviews-summary {
    background: var(--white);
    border-radius: var(--radius-lg);
    padding: 2rem;
    box-shadow: var(--shadow-sm);
    margin-bottom: 2rem;
}

.rating-breakdown {
    display: grid;
    grid-template-columns: auto 1fr auto;
    gap: 1rem;
    align-items: center;
    margin-bottom: 1rem;
}

.rating-bar {
    background: var(--grey-200);
    height: 8px;
    border-radius: 4px;
    overflow: hidden;
}

.rating-fill {
    background: var(--accent-gold);
    height: 100%;
    transition: var(--transition-normal);
}

.review-item {
    background: var(--white);
    border-radius: var(--radius-lg);
    padding: 1.5rem;
    box-shadow: var(--shadow-sm);
    margin-bottom: 1.5rem;
}

.review-header {
    display: flex;
    justify-content: between;
    align-items: flex-start;
    margin-bottom: 1rem;
}

.reviewer-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.reviewer-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: var(--gradient-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--white);
    font-weight: 600;
    font-size: 1.2rem;
}

.review-meta {
    color: var(--grey-600);
    font-size: 0.9rem;
}

.review-actions {
    display: flex;
    gap: 1rem;
    align-items: center;
}

.helpful-btn {
    background: none;
    border: 1px solid var(--grey-300);
    color: var(--grey-600);
    padding: 0.25rem 0.75rem;
    border-radius: var(--radius-sm);
    font-size: 0.85rem;
    cursor: pointer;
    transition: var(--transition-normal);
}

.helpful-btn:hover {
    border-color: var(--primary-color);
    color: var(--primary-color);
}

.related-products {
    margin-top: 4rem;
}

.related-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 1.5rem;
    margin-top: 2rem;
}

.sticky-buy-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: var(--white);
    border-top: 1px solid var(--grey-200);
    padding: 1rem;
    box-shadow: var(--shadow-lg);
    z-index: 1000;
    transform: translateY(100%);
    transition: var(--transition-normal);
}

.sticky-buy-bar.show {
    transform: translateY(0);
}

.sticky-buy-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: 1200px;
    margin: 0 auto;
}

.sticky-product-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.sticky-product-image {
    width: 50px;
    height: 50px;
    border-radius: var(--radius-sm);
    overflow: hidden;
}

.sticky-actions {
    display: flex;
    gap: 1rem;
}

@media (max-width: 768px) {
    .product-info {
        padding-left: 0;
        margin-top: 2rem;
    }
    
    .product-actions {
        grid-template-columns: 1fr;
    }
    
    .image-thumbnails {
        grid-template-columns: repeat(3, 1fr);
    }
    
    .product-title {
        font-size: 1.5rem;
    }
    
    .current-price {
        font-size: 2rem;
    }
    
    .sticky-buy-content {
        flex-direction: column;
        gap: 1rem;
    }
    
    .sticky-actions {
        width: 100%;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="container product-detail-container">
    <!-- Breadcrumb -->
    <nav aria-label="breadcrumb" class="mb-4">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'shop:homepage' %}" class="text-decoration-none">Home</a></li>
            <li class="breadcrumb-item"><a href="{% url 'shop:shop' %}" class="text-decoration-none">Shop</a></li>
            <li class="breadcrumb-item"><a href="#" class="text-decoration-none">Leggings</a></li>
            <li class="breadcrumb-item active" aria-current="page">Premium Cotton Leggings</li>
        </ol>
    </nav>

    <div class="row">
        <!-- Product Images -->
        <div class="col-lg-6">
            <div class="product-images">
                <div class="main-image">
                    <img src="https://images.unsplash.com/photo-1594633312681-425c7b97ccd1?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80" 
                         alt="Premium Cotton Leggings" 
                         id="mainImage">
                    <div class="zoom-overlay" id="zoomOverlay"></div>
                </div>
                
                <div class="image-thumbnails">
                    <div class="thumbnail active">
                        <img src="https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" 
                             alt="Front View">
                    </div>
                    <div class="thumbnail">
                        <img src="https://images.unsplash.com/photo-1594633312681-425c7b97ccd1?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" 
                             alt="Side View">
                    </div>
                    <div class="thumbnail">
                        <img src="https://images.unsplash.com/photo-1506629905607-cc515fb2d53f?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" 
                             alt="Back View">
                    </div>
                    <div class="thumbnail">
                        <img src="https://images.unsplash.com/photo-1551698618-1dfe5d97d256?ixlib=rb-4.0.3&auto=format&fit=crop&w=200&q=80" 
                             alt="Detail View">
                    </div>
                </div>
            </div>
        </div>

        <!-- Product Information -->
        <div class="col-lg-6">
            <div class="product-info">
                <h1 class="product-title">Premium Cotton Ankle Length Leggings</h1>
                
                <div class="product-rating">
                    <div class="rating-stars">
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star"></i>
                        <i class="fas fa-star-half-alt"></i>
                    </div>
                    <span class="rating-text">4.7 (2,543 reviews)</span>
                    <a href="#reviews" class="text-primary text-decoration-none ms-2">See all reviews</a>
                </div>

                <div class="product-price">
                    <span class="current-price">₹799</span>
                    <span class="original-price">₹1,299</span>
                    <span class="discount-badge">38% OFF</span>
                </div>

                <p class="product-description">
                    Experience unmatched comfort with our premium cotton ankle-length leggings. 
                    Crafted from high-quality cotton blend fabric, these leggings offer the perfect 
                    combination of stretch, breathability, and durability. Perfect for yoga, workouts, 
                    or casual wear.
                </p>

                <div class="product-options">
                    <!-- Size Selection -->
                    <div class="option-group">
                        <label class="option-label">
                            Size: <span id="selectedSizeText">Please select</span>
                        </label>
                        <div class="size-options">
                            <div class="size-option" data-size="XS">XS</div>
                            <div class="size-option" data-size="S">S</div>
                            <div class="size-option" data-size="M">M</div>
                            <div class="size-option" data-size="L">L</div>
                            <div class="size-option" data-size="XL">XL</div>
                            <div class="size-option unavailable" data-size="XXL">XXL</div>
                        </div>
                        <small class="text-muted mt-2 d-block">
                            <i class="fas fa-ruler me-1"></i>
                            <a href="#" class="text-primary text-decoration-none" data-bs-toggle="modal" data-bs-target="#sizeGuideModal">
                                Size Guide
                            </a>
                        </small>
                    </div>

                    <!-- Color Selection -->
                    <div class="option-group">
                        <label class="option-label">
                            Color: <span id="selectedColorText">Black</span>
                        </label>
                        <div class="color-options">
                            <div class="color-option selected" style="background: #000;" data-color="Black"></div>
                            <div class="color-option" style="background: #fff; border: 3px solid #ddd;" data-color="White"></div>
                            <div class="color-option" style="background: #6c757d;" data-color="Gray"></div>
                            <div class="color-option" style="background: #007bff;" data-color="Navy Blue"></div>
                            <div class="color-option" style="background: #e91e63;" data-color="Pink"></div>
                        </div>
                    </div>
                </div>

                <!-- Quantity & Actions -->
                <div class="quantity-selector">
                    <label class="option-label me-3">Quantity:</label>
                    <div class="quantity-control">
                        <button class="quantity-btn" id="decreaseQty">-</button>
                        <input type="number" class="quantity-input" id="quantity" value="1" min="1" max="10">
                        <button class="quantity-btn" id="increaseQty">+</button>
                    </div>
                    <small class="text-muted">
                        <i class="fas fa-box me-1"></i>
                        12 items left in stock
                    </small>
                </div>

                <div class="product-actions">
                    <button class="btn btn-primary btn-add-cart" id="addToCartBtn">
                        <i class="fas fa-shopping-cart me-2"></i>Add to Cart
                    </button>
                    <button class="btn btn-outline-primary btn-wishlist" id="wishlistBtn">
                        <i class="far fa-heart"></i>
                        <span>Wishlist</span>
                    </button>
                </div>

                <!-- Product Features -->
                <div class="product-features">
                    <h6 class="mb-3">
                        <i class="fas fa-check-circle text-success me-2"></i>
                        Product Features
                    </h6>
                    <ul class="feature-list">
                        <li><i class="fas fa-leaf"></i> 100% Premium Cotton Blend</li>
                        <li><i class="fas fa-tshirt"></i> 4-Way Stretch Fabric</li>
                        <li><i class="fas fa-wind"></i> Breathable & Moisture-Wicking</li>
                        <li><i class="fas fa-washing-machine"></i> Machine Washable</li>
                        <li><i class="fas fa-shield-alt"></i> Fade Resistant Colors</li>
                        <li><i class="fas fa-thumbs-up"></i> Perfect Fit Guarantee</li>
                    </ul>
                </div>

                <!-- Trust Badges -->
                <div class="d-flex gap-3 flex-wrap">
                    <div class="d-flex align-items-center text-muted">
                        <i class="fas fa-truck me-2"></i>
                        <small>Free shipping above ₹999</small>
                    </div>
                    <div class="d-flex align-items-center text-muted">
                        <i class="fas fa-undo me-2"></i>
                        <small>30-day easy returns</small>
                    </div>
                    <div class="d-flex align-items-center text-muted">
                        <i class="fas fa-shield-alt me-2"></i>
                        <small>1-year warranty</small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Product Tabs -->
    <div class="product-tabs">
        <ul class="nav nav-tabs" id="productTabs">
            <li class="nav-item">
                <button class="nav-link active" data-bs-toggle="tab" data-bs-target="#description">
                    Description
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#specifications">
                    Specifications
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#reviews">
                    Reviews (2,543)
                </button>
            </li>
            <li class="nav-item">
                <button class="nav-link" data-bs-toggle="tab" data-bs-target="#care">
                    Care Instructions
                </button>
            </li>
        </ul>
        
        <div class="tab-content">
            <!-- Description Tab -->
            <div class="tab-pane fade show active" id="description">
                <div class="row">
                    <div class="col-lg-8">
                        <h5 class="mb-3">Product Description</h5>
                        <p>
                            Our Premium Cotton Ankle Length Leggings are designed for the modern woman who values both 
                            comfort and style. Made from a premium cotton blend with 4-way stretch technology, these 
                            leggings move with you throughout your day.
                        </p>
                        <p>
                            Whether you're heading to a yoga class, running errands, or lounging at home, these versatile 
                            leggings provide the perfect foundation for any outfit. The ankle-length design offers a 
                            contemporary silhouette that pairs beautifully with sneakers, flats, or boots.
                        </p>
                        <h6 class="mt-4 mb-3">Key Benefits:</h6>
                        <ul>
                            <li>Superior comfort with cotton-soft feel</li>
                            <li>Four-way stretch for unrestricted movement</li>
                            <li>Moisture-wicking properties keep you dry</li>
                            <li>Fade-resistant colors that last wash after wash</li>
                            <li>Perfect for layering or wearing alone</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- Specifications Tab -->
            <div class="tab-pane fade" id="specifications">
                <h5 class="mb-3">Product Specifications</h5>
                <div class="row">
                    <div class="col-md-6">
                        <table class="table table-borderless">
                            <tr>
                                <td><strong>Material:</strong></td>
                                <td>95% Cotton, 5% Elastane</td>
                            </tr>
                            <tr>
                                <td><strong>Fit:</strong></td>
                                <td>Slim Fit</td>
                            </tr>
                            <tr>
                                <td><strong>Length:</strong></td>
                                <td>Ankle Length</td>
                            </tr>
                            <tr>
                                <td><strong>Waistband:</strong></td>
                                <td>High-rise elastic waistband</td>
                            </tr>
                            <tr>
                                <td><strong>Weight:</strong></td>
                                <td>Medium Weight (250 GSM)</td>
                            </tr>
                        </table>
                    </div>
                    <div class="col-md-6">
                        <table class="table table-borderless">
                            <tr>
                                <td><strong>Available Sizes:</strong></td>
                                <td>XS, S, M, L, XL</td>
                            </tr>
                            <tr>
                                <td><strong>Colors:</strong></td>
                                <td>5 color options</td>
                            </tr>
                            <tr>
                                <td><strong>Country of Origin:</strong></td>
                                <td>India</td>
                            </tr>
                            <tr>
                                <td><strong>Manufacturer:</strong></td>
                                <td>Women's Wear Store</td>
                            </tr>
                            <tr>
                                <td><strong>SKU:</strong></td>
                                <td>WW-LEG-001</td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
            
            <!-- Reviews Tab -->
            <div class="tab-pane fade" id="reviews">
                <!-- Reviews Summary -->
                <div class="reviews-summary">
                    <div class="row">
                        <div class="col-md-4 text-center">
                            <div class="display-1 text-primary mb-2">4.7</div>
                            <div class="rating-stars mb-2">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                            </div>
                            <p class="text-muted">Based on 2,543 reviews</p>
                        </div>
                        <div class="col-md-8">
                            <div class="rating-breakdown">
                                <span>5 stars</span>
                                <div class="rating-bar"><div class="rating-fill" style="width: 75%"></div></div>
                                <span>75%</span>
                            </div>
                            <div class="rating-breakdown">
                                <span>4 stars</span>
                                <div class="rating-bar"><div class="rating-fill" style="width: 18%"></div></div>
                                <span>18%</span>
                            </div>
                            <div class="rating-breakdown">
                                <span>3 stars</span>
                                <div class="rating-bar"><div class="rating-fill" style="width: 5%"></div></div>
                                <span>5%</span>
                            </div>
                            <div class="rating-breakdown">
                                <span>2 stars</span>
                                <div class="rating-bar"><div class="rating-fill" style="width: 1%"></div></div>
                                <span>1%</span>
                            </div>
                            <div class="rating-breakdown">
                                <span>1 star</span>
                                <div class="rating-bar"><div class="rating-fill" style="width: 1%"></div></div>
                                <span>1%</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Individual Reviews -->
                <div class="review-item">
                    <div class="review-header">
                        <div class="reviewer-info">
                            <div class="reviewer-avatar">A</div>
                            <div>
                                <h6 class="mb-0">Anita Sharma</h6>
                                <div class="rating-stars">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                </div>
                                <div class="review-meta">Verified Purchase • 2 weeks ago</div>
                            </div>
                        </div>
                    </div>
                    <p class="mb-3">
                        "Absolutely love these leggings! The fabric is so soft and comfortable. I've worn them for yoga, 
                        running errands, and even to work (with a longer top). The fit is perfect and they don't roll down 
                        at the waist. Highly recommend!"
                    </p>
                    <div class="review-actions">
                        <button class="helpful-btn">
                            <i class="fas fa-thumbs-up me-1"></i>Helpful (23)
                        </button>
                        <button class="helpful-btn">
                            <i class="fas fa-reply me-1"></i>Reply
                        </button>
                    </div>
                </div>

                <div class="review-item">
                    <div class="review-header">
                        <div class="reviewer-info">
                            <div class="reviewer-avatar">P</div>
                            <div>
                                <h6 class="mb-0">Priya Patel</h6>
                                <div class="rating-stars">
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="fas fa-star"></i>
                                    <i class="far fa-star"></i>
                                </div>
                                <div class="review-meta">Verified Purchase • 1 month ago</div>
                            </div>
                        </div>
                    </div>
                    <p class="mb-3">
                        "Great quality leggings at an affordable price. The cotton blend is comfortable and breathable. 
                        Only minor complaint is that they're slightly longer than I expected, but that's easily fixable. 
                        Will definitely buy more colors!"
                    </p>
                    <div class="review-actions">
                        <button class="helpful-btn">
                            <i class="fas fa-thumbs-up me-1"></i>Helpful (15)
                        </button>
                        <button class="helpful-btn">
                            <i class="fas fa-reply me-1"></i>Reply
                        </button>
                    </div>
                </div>

                <div class="text-center mt-4">
                    <button class="btn btn-outline-primary">
                        <i class="fas fa-plus me-2"></i>Load More Reviews
                    </button>
                </div>
            </div>
            
            <!-- Care Instructions Tab -->
            <div class="tab-pane fade" id="care">
                <h5 class="mb-3">Care Instructions</h5>
                <div class="row">
                    <div class="col-md-6">
                        <h6 class="text-success mb-3">
                            <i class="fas fa-check-circle me-2"></i>Do's
                        </h6>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-washing-machine text-primary me-2"></i>
                                Machine wash in cold water (30°C max)
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-tshirt text-primary me-2"></i>
                                Wash with similar colors
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-wind text-primary me-2"></i>
                                Air dry or tumble dry on low heat
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-iron text-primary me-2"></i>
                                Iron on low heat if needed
                            </li>
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6 class="text-danger mb-3">
                            <i class="fas fa-times-circle me-2"></i>Don'ts
                        </h6>
                        <ul class="list-unstyled">
                            <li class="mb-2">
                                <i class="fas fa-ban text-danger me-2"></i>
                                Do not bleach
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-ban text-danger me-2"></i>
                                Do not dry clean
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-ban text-danger me-2"></i>
                                Do not iron on high heat
                            </li>
                            <li class="mb-2">
                                <i class="fas fa-ban text-danger me-2"></i>
                                Do not wring or twist when wet
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Related Products -->
    <div class="related-products">
        <h3 class="mb-4">You Might Also Like</h3>
        <div class="related-grid">
            {% for i in "1234" %}
            <div class="product-card card h-100 border-0 shadow-sm">
                <div class="position-relative">
                    <img src="https://images.unsplash.com/photo-1594633312681-425c7b97ccd1?ixlib=rb-4.0.3&auto=format&fit=crop&w=300&q=80" 
                         class="card-img-top" 
                         alt="Related Product"
                         style="height: 200px; object-fit: cover;">
                    <button class="wishlist-btn position-absolute" style="top: 10px; right: 10px; background: rgba(255,255,255,0.9); border: none; border-radius: 50%; width: 35px; height: 35px;">
                        <i class="far fa-heart"></i>
                    </button>
                </div>
                <div class="card-body p-3">
                    <h6 class="card-title">Related Product {{ forloop.counter }}</h6>
                    <div class="rating-stars mb-2">
                        <i class="fas fa-star text-warning"></i>
                        <i class="fas fa-star text-warning"></i>
                        <i class="fas fa-star text-warning"></i>
                        <i class="fas fa-star text-warning"></i>
                        <i class="far fa-star text-warning"></i>
                    </div>
                    <div class="price">
                        <span class="h6 text-primary">₹{{ forloop.counter }}99</span>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

<!-- Sticky Buy Bar -->
<div class="sticky-buy-bar" id="stickyBuyBar">
    <div class="sticky-buy-content">
        <div class="sticky-product-info">
            <div class="sticky-product-image">
                <img src="https://images.unsplash.com/photo-1515886657613-9f3515b0c78f?ixlib=rb-4.0.3&auto=format&fit=crop&w=100&q=80" alt="Product">
            </div>
            <div>
                <h6 class="mb-0">Premium Cotton Ankle Length Leggings</h6>
                <span class="text-primary fw-bold">₹799</span>
            </div>
        </div>
        <div class="sticky-actions">
            <button class="btn btn-outline-primary">
                <i class="far fa-heart me-2"></i>Wishlist
            </button>
            <button class="btn btn-primary">
                <i class="fas fa-shopping-cart me-2"></i>Add to Cart
            </button>
        </div>
    </div>
</div>

<!-- Size Guide Modal -->
<div class="modal fade" id="sizeGuideModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Size Guide</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="table-responsive">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Size</th>
                                <th>Waist (inches)</th>
                                <th>Hip (inches)</th>
                                <th>Length (inches)</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>XS</td>
                                <td>24-26</td>
                                <td>34-36</td>
                                <td>35</td>
                            </tr>
                            <tr>
                                <td>S</td>
                                <td>26-28</td>
                                <td>36-38</td>
                                <td>36</td>
                            </tr>
                            <tr>
                                <td>M</td>
                                <td>28-30</td>
                                <td>38-40</td>
                                <td>37</td>
                            </tr>
                            <tr>
                                <td>L</td>
                                <td>30-32</td>
                                <td>40-42</td>
                                <td>38</td>
                            </tr>
                            <tr>
                                <td>XL</td>
                                <td>32-34</td>
                                <td>42-44</td>
                                <td>39</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="mt-3">
                    <h6>How to Measure:</h6>
                    <ul>
                        <li><strong>Waist:</strong> Measure around the narrowest part of your waist</li>
                        <li><strong>Hip:</strong> Measure around the fullest part of your hips</li>
                        <li><strong>Length:</strong> Measure from waist to ankle</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<!-- Product detail specific JavaScript -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    initializeProductDetailSpecific();
});

function initializeProductDetailSpecific() {
    // Image gallery
    initializeImageGallery();
    
    // Size and color selection
    initializeOptions();
    
    // Quantity controls
    initializeQuantityControls();
    
    // Sticky buy bar
    initializeStickyBuyBar();
    
    // Review interactions
    initializeReviews();
}

function initializeImageGallery() {
    const mainImage = document.getElementById('mainImage');
    const thumbnails = document.querySelectorAll('.thumbnail');
    
    thumbnails.forEach(thumbnail => {
        thumbnail.addEventListener('click', () => {
            const img = thumbnail.querySelector('img');
            const newSrc = img.src.replace('w=200', 'w=600');
            
            mainImage.src = newSrc;
            
            thumbnails.forEach(t => t.classList.remove('active'));
            thumbnail.classList.add('active');
        });
    });
    
    // Zoom functionality (simplified)
    const zoomOverlay = document.getElementById('zoomOverlay');
    zoomOverlay.addEventListener('click', () => {
        // Open image in modal or lightbox
        showImageModal(mainImage.src);
    });
}

function initializeOptions() {
    // Size selection
    const sizeOptions = document.querySelectorAll('.size-option:not(.unavailable)');
    const selectedSizeText = document.getElementById('selectedSizeText');
    
    sizeOptions.forEach(option => {
        option.addEventListener('click', () => {
            sizeOptions.forEach(o => o.classList.remove('selected'));
            option.classList.add('selected');
            selectedSizeText.textContent = option.dataset.size;
        });
    });
    
    // Color selection
    const colorOptions = document.querySelectorAll('.color-option');
    const selectedColorText = document.getElementById('selectedColorText');
    
    colorOptions.forEach(option => {
        option.addEventListener('click', () => {
            colorOptions.forEach(o => o.classList.remove('selected'));
            option.classList.add('selected');
            selectedColorText.textContent = option.dataset.color;
        });
    });
}

function initializeQuantityControls() {
    const decreaseBtn = document.getElementById('decreaseQty');
    const increaseBtn = document.getElementById('increaseQty');
    const quantityInput = document.getElementById('quantity');
    
    decreaseBtn.addEventListener('click', () => {
        const current = parseInt(quantityInput.value);
        if (current > 1) {
            quantityInput.value = current - 1;
        }
    });
    
    increaseBtn.addEventListener('click', () => {
        const current = parseInt(quantityInput.value);
        const max = parseInt(quantityInput.max) || 10;
        if (current < max) {
            quantityInput.value = current + 1;
        }
    });
    
    quantityInput.addEventListener('change', () => {
        const value = parseInt(quantityInput.value);
        const min = parseInt(quantityInput.min) || 1;
        const max = parseInt(quantityInput.max) || 10;
        
        if (value < min) quantityInput.value = min;
        if (value > max) quantityInput.value = max;
    });
}

function initializeAddToCart() {
    const addToCartBtn = document.getElementById('addToCartBtn');
    
    addToCartBtn.addEventListener('click', () => {
        // Validate selections
        const selectedSize = document.querySelector('.size-option.selected');
        if (!selectedSize) {
            showNotification('Please select a size', 'warning');
            return;
        }
        
        // Add loading state
        const originalText = addToCartBtn.innerHTML;
        addToCartBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Adding to Cart...';
        addToCartBtn.disabled = true;
        
        // Simulate API call
        setTimeout(() => {
            addToCartBtn.innerHTML = '<i class="fas fa-check me-2"></i>Added to Cart!';
            addToCartBtn.classList.remove('btn-primary');
            addToCartBtn.classList.add('btn-success');
            
            showNotification('Product added to cart successfully!', 'success');
            updateCartCounter();
            
            // Reset button after 3 seconds
            setTimeout(() => {
                addToCartBtn.innerHTML = originalText;
                addToCartBtn.classList.remove('btn-success');
                addToCartBtn.classList.add('btn-primary');
                addToCartBtn.disabled = false;
            }, 3000);
        }, 1500);
    });
}

function initializeWishlist() {
    const wishlistBtn = document.getElementById('wishlistBtn');
    
    wishlistBtn.addEventListener('click', () => {
        wishlistBtn.classList.toggle('active');
        
        const icon = wishlistBtn.querySelector('i');
        const text = wishlistBtn.querySelector('span');
        
        if (wishlistBtn.classList.contains('active')) {
            icon.classList.remove('far');
            icon.classList.add('fas');
            text.textContent = 'Wishlisted';
            wishlistBtn.classList.remove('btn-outline-primary');
            wishlistBtn.classList.add('btn-primary');
            showNotification('Added to wishlist!', 'success');
        } else {
            icon.classList.remove('fas');
            icon.classList.add('far');
            text.textContent = 'Wishlist';
            wishlistBtn.classList.remove('btn-primary');
            wishlistBtn.classList.add('btn-outline-primary');
            showNotification('Removed from wishlist', 'info');
        }
    });
}

function initializeStickyBuyBar() {
    const stickyBuyBar = document.getElementById('stickyBuyBar');
    const productActions = document.querySelector('.product-actions');
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                stickyBuyBar.classList.remove('show');
            } else {
                stickyBuyBar.classList.add('show');
            }
        });
    });
    
    if (productActions) {
        observer.observe(productActions);
    }
}

function initializeReviews() {
    // Helpful button functionality
    document.querySelectorAll('.helpful-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            if (this.innerHTML.includes('Helpful')) {
                const currentCount = parseInt(this.textContent.match(/\d+/)?.[0] || 0);
                this.innerHTML = `<i class="fas fa-thumbs-up me-1"></i>Helpful (${currentCount + 1})`;
                this.classList.add('text-primary');
                showNotification('Thank you for your feedback!', 'success');
            }
        });
    });
}

// Utility functions
function showImageModal(imageSrc) {
    // Create and show image modal
    const modal = document.createElement('div');
    modal.className = 'modal fade';
    modal.innerHTML = `
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Product Image</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body text-center">
                    <img src="${imageSrc}" class="img-fluid" alt="Product Image">
                </div>
            </div>
        </div>
    `;
    
    document.body.appendChild(modal);
    const bsModal = new bootstrap.Modal(modal);
    bsModal.show();
    
    modal.addEventListener('hidden.bs.modal', () => {
        modal.remove();
    });
}

function updateCartCounter() {
    const counter = document.querySelector('.cart-badge');
    if (counter) {
        const current = parseInt(counter.textContent) || 0;
        counter.textContent = current + 1;
        
        // Add animation
        counter.style.transform = 'scale(1.3)';
        setTimeout(() => {
            counter.style.transform = 'scale(1)';
        }, 200);
    }
}

function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = `toast position-fixed top-0 end-0 m-3 bg-${type} text-white`;
    notification.style.zIndex = '9999';
    notification.innerHTML = `
        <div class="toast-body d-flex align-items-center">
            <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'warning' ? 'exclamation-triangle' : 'info-circle'} me-2"></i>
            ${message}
            <button type="button" class="btn-close btn-close-white ms-auto" onclick="this.closest('.toast').remove()"></button>
        </div>
    `;
    
    document.body.appendChild(notification);
    
    // Auto remove after 4 seconds
    setTimeout(() => {
        notification.style.opacity = '0';
        setTimeout(() => notification.remove(), 300);
    }, 4000);
}
</script>
{% endblock %}
